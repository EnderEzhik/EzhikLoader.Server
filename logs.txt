Executed DbCommand (47ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM information_schema.tables
WHERE table_type = 'BASE TABLE' AND table_schema = 'ezhik_loader'
Now listening on: https://26.98.105.98:7292
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: C:\MyFiles\Programming\C#\Ezhik Loader\EzhikLoader.Server
Application is shutting down...
The foreign key property 'Subscription.PaymentId1' was created in shadow state because a conflicting property with the simple name 'PaymentId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
The foreign key property 'Subscription.PaymentId1' was created in shadow state because a conflicting property with the simple name 'PaymentId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
The foreign key property 'Subscription.PaymentId1' was created in shadow state because a conflicting property with the simple name 'PaymentId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
The foreign key property 'Subscription.PaymentId1' was created in shadow state because a conflicting property with the simple name 'PaymentId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
The foreign key property 'Subscription.PaymentId1' was created in shadow state because a conflicting property with the simple name 'PaymentId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
The foreign key property 'Subscription.PaymentId1' was created in shadow state because a conflicting property with the simple name 'PaymentId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
Executed DbCommand (40ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='ezhik_loader' AND TABLE_NAME='__EFMigrationsHistory';
The foreign key property 'Subscription.PaymentId1' was created in shadow state because a conflicting property with the simple name 'PaymentId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
The foreign key property 'Subscription.PaymentId1' was created in shadow state because a conflicting property with the simple name 'PaymentId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
The foreign key property 'Subscription.PaymentId1' was created in shadow state because a conflicting property with the simple name 'PaymentId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
The foreign key property 'Subscription.PaymentId1' was created in shadow state because a conflicting property with the simple name 'PaymentId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='ezhik_loader' AND TABLE_NAME='__EFMigrationsHistory';
The foreign key property 'Subscription.PaymentId1' was created in shadow state because a conflicting property with the simple name 'PaymentId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
The foreign key property 'Subscription.PaymentId1' was created in shadow state because a conflicting property with the simple name 'PaymentId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
The foreign key property 'Subscription.PaymentId1' was created in shadow state because a conflicting property with the simple name 'PaymentId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='ezhik_loader' AND TABLE_NAME='__EFMigrationsHistory';
Executed DbCommand (142ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE `__EFMigrationsHistory` (
    `MigrationId` varchar(150) CHARACTER SET utf8mb4 NOT NULL,
    `ProductVersion` varchar(32) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK___EFMigrationsHistory` PRIMARY KEY (`MigrationId`)
) CHARACTER SET=utf8mb4;
Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='ezhik_loader' AND TABLE_NAME='__EFMigrationsHistory';
Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
Applying migration '20250519190156_First1'.
Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER DATABASE CHARACTER SET utf8mb4;
Failed executing DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE `Apps` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` varchar(32) CHARACTER SET utf8mb4 NOT NULL,
    `Description` TEXT CHARACTER SET utf8mb4 NOT NULL,
    `Price` DECIMAL(6,2) NOT NULL,
    `IsActive` tinyint(1) NOT NULL,
    `CreatedAt` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP(),
    `LastUpdatedAt` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP(),
    `FileName` varchar(32) CHARACTER SET utf8mb4 NOT NULL,
    `IconName` varchar(32) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK_Apps` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
The foreign key property 'Subscription.PaymentId1' was created in shadow state because a conflicting property with the simple name 'PaymentId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
The foreign key property 'Subscription.PaymentId1' was created in shadow state because a conflicting property with the simple name 'PaymentId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='ezhik_loader' AND TABLE_NAME='__EFMigrationsHistory';
Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
The foreign key property 'Subscription.PaymentId1' was created in shadow state because a conflicting property with the simple name 'PaymentId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
The foreign key property 'Subscription.PaymentId1' was created in shadow state because a conflicting property with the simple name 'PaymentId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
The foreign key property 'Subscription.PaymentId1' was created in shadow state because a conflicting property with the simple name 'PaymentId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
The foreign key property 'Subscription.PaymentId1' was created in shadow state because a conflicting property with the simple name 'PaymentId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE DATABASE `ezhik_loader`;
Executed DbCommand (53ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE `__EFMigrationsHistory` (
    `MigrationId` varchar(150) CHARACTER SET utf8mb4 NOT NULL,
    `ProductVersion` varchar(32) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK___EFMigrationsHistory` PRIMARY KEY (`MigrationId`)
) CHARACTER SET=utf8mb4;
Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='ezhik_loader' AND TABLE_NAME='__EFMigrationsHistory';
Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
Applying migration '20250519190732_First1'.
Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER DATABASE CHARACTER SET utf8mb4;
Executed DbCommand (27ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE `Apps` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` varchar(32) CHARACTER SET utf8mb4 NOT NULL,
    `Description` TEXT CHARACTER SET utf8mb4 NOT NULL,
    `Price` DECIMAL(6,2) NOT NULL,
    `IsActive` tinyint(1) NOT NULL,
    `CreatedAt` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP(),
    `LastUpdatedAt` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP(),
    `FileName` varchar(32) CHARACTER SET utf8mb4 NOT NULL,
    `IconName` varchar(32) CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_Apps` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE `Roles` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` varchar(32) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK_Roles` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
Executed DbCommand (36ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE `Users` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Login` varchar(20) CHARACTER SET utf8mb4 NOT NULL,
    `Password` varchar(32) CHARACTER SET utf8mb4 NOT NULL,
    `Email` varchar(255) CHARACTER SET utf8mb4 NULL,
    `RoleId` int NOT NULL,
    `IsActive` tinyint(1) NOT NULL,
    `RegistrationDate` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP(),
    `LastLoginDate` TIMESTAMP NULL,
    CONSTRAINT `PK_Users` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Users_Roles_RoleId` FOREIGN KEY (`RoleId`) REFERENCES `Roles` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
Executed DbCommand (48ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE `Payment` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `PaymentId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `Status` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Amount` decimal(65,30) NOT NULL,
    `CreatedAt` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP(),
    `UserId` int NOT NULL,
    `AppId` int NOT NULL,
    CONSTRAINT `PK_Payment` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Payment_Apps_AppId` FOREIGN KEY (`AppId`) REFERENCES `Apps` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_Payment_Users_UserId` FOREIGN KEY (`UserId`) REFERENCES `Users` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
Executed DbCommand (45ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE `Subscriptions` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `StartDate` TIMESTAMP NOT NULL,
    `EndDate` TIMESTAMP NOT NULL,
    `LastDownloadedAt` TIMESTAMP NULL,
    `UserId` int NOT NULL,
    `AppId` int NOT NULL,
    `PaymentId` longtext CHARACTER SET utf8mb4 NOT NULL,
    `PaymentId1` int NOT NULL,
    CONSTRAINT `PK_Subscriptions` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Subscriptions_Apps_AppId` FOREIGN KEY (`AppId`) REFERENCES `Apps` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_Subscriptions_Payment_PaymentId1` FOREIGN KEY (`PaymentId1`) REFERENCES `Payment` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_Subscriptions_Users_UserId` FOREIGN KEY (`UserId`) REFERENCES `Users` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO `Apps` (`Id`, `Description`, `FileName`, `IconName`, `IsActive`, `Name`, `Price`)
VALUES (1, 'Description for testApp1', 'testApp1', NULL, TRUE, 'testApp1', 199.0);
Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO `Roles` (`Id`, `Name`)
VALUES (1, 'admin'),
(2, 'user');
Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO `Users` (`Id`, `Email`, `IsActive`, `LastLoginDate`, `Login`, `Password`, `RoleId`)
VALUES (1, NULL, TRUE, NULL, 'test', 'test', 1);
Executed DbCommand (92ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX `IX_Apps_FileName` ON `Apps` (`FileName`);
Executed DbCommand (41ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX `IX_Apps_IconName` ON `Apps` (`IconName`);
Executed DbCommand (50ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX `IX_Apps_Name` ON `Apps` (`Name`);
Executed DbCommand (43ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX `IX_Payment_AppId` ON `Payment` (`AppId`);
Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX `IX_Payment_PaymentId` ON `Payment` (`PaymentId`);
Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX `IX_Payment_UserId` ON `Payment` (`UserId`);
Executed DbCommand (36ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX `IX_Roles_Name` ON `Roles` (`Name`);
Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX `IX_Subscriptions_AppId` ON `Subscriptions` (`AppId`);
Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX `IX_Subscriptions_PaymentId1` ON `Subscriptions` (`PaymentId1`);
Executed DbCommand (15ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX `IX_Subscriptions_UserId` ON `Subscriptions` (`UserId`);
Executed DbCommand (40ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX `IX_Users_Email` ON `Users` (`Email`);
Executed DbCommand (34ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX `IX_Users_Login` ON `Users` (`Login`);
Executed DbCommand (42ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX `IX_Users_RoleId` ON `Users` (`RoleId`);
Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO `__EFMigrationsHistory` (`MigrationId`, `ProductVersion`)
VALUES ('20250519190732_First1', '8.0.13');
Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='ezhik_loader' AND TABLE_NAME='__EFMigrationsHistory';
Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='ezhik_loader' AND TABLE_NAME='__EFMigrationsHistory';
Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
Applying migration '20250519190912_First2'.
Executed DbCommand (272ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE `Subscriptions` DROP FOREIGN KEY `FK_Subscriptions_Payment_PaymentId1`;
Executed DbCommand (109ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE `Subscriptions` DROP INDEX `IX_Subscriptions_PaymentId1`;
Executed DbCommand (77ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE `Subscriptions` DROP COLUMN `PaymentId1`;
Executed DbCommand (90ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE `Subscriptions` MODIFY COLUMN `PaymentId` int NOT NULL;
Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX `IX_Subscriptions_PaymentId` ON `Subscriptions` (`PaymentId`);
Executed DbCommand (83ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE `Subscriptions` ADD CONSTRAINT `FK_Subscriptions_Payment_PaymentId` FOREIGN KEY (`PaymentId`) REFERENCES `Payment` (`Id`) ON DELETE CASCADE;
Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO `__EFMigrationsHistory` (`MigrationId`, `ProductVersion`)
VALUES ('20250519190912_First2', '8.0.13');
Executed DbCommand (202ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM information_schema.tables
WHERE table_type = 'BASE TABLE' AND table_schema = 'ezhik_loader'
Now listening on: https://26.98.105.98:7292
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: C:\MyFiles\Programming\C#\Ezhik Loader\EzhikLoader.Server
Application is shutting down...
Executed DbCommand (27ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM information_schema.tables
WHERE table_type = 'BASE TABLE' AND table_schema = 'ezhik_loader'
Now listening on: https://26.98.105.98:7292
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: C:\MyFiles\Programming\C#\Ezhik Loader\EzhikLoader.Server
Application is shutting down...
Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM information_schema.tables
WHERE table_type = 'BASE TABLE' AND table_schema = 'ezhik_loader'
Now listening on: https://26.98.105.98:7292
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: C:\MyFiles\Programming\C#\Ezhik Loader\EzhikLoader.Server
Method: GET
Path: /api/payments/start
User-Agent: PostmanRuntime/7.44.0
Time: 23:14:27
Host: 26.98.105.98:7292
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJhNGE0YWM3OS0yNWFmLTRiOWUtOTFlNy1lN2ExZGZhYzM1NmEiLCJzdWIiOiIxIiwicm9sZSI6ImFkbWluIiwiZXhwIjoxNzQ3Njk3MTAxfQ.W3iHXkN7N2GlpQZmmECdzjg_UB9m413Jnn7bcQrXyRY
Body: {
"UserId":1,
"AppId":1,
"Amout":199.0
}

StatusCode: 405

Method: POST
Path: /api/payments/start
User-Agent: PostmanRuntime/7.44.0
Time: 23:14:31
Host: 26.98.105.98:7292
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJhNGE0YWM3OS0yNWFmLTRiOWUtOTFlNy1lN2ExZGZhYzM1NmEiLCJzdWIiOiIxIiwicm9sZSI6ImFkbWluIiwiZXhwIjoxNzQ3Njk3MTAxfQ.W3iHXkN7N2GlpQZmmECdzjg_UB9m413Jnn7bcQrXyRY
Body: {
"UserId":1,
"AppId":1,
"Amout":199.0
}

An unhandled exception has occurred while executing the request.
Application is shutting down...
Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM information_schema.tables
WHERE table_type = 'BASE TABLE' AND table_schema = 'ezhik_loader'
Now listening on: https://26.98.105.98:7292
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: C:\MyFiles\Programming\C#\Ezhik Loader\EzhikLoader.Server
Method: POST
Path: /api/payments/start
User-Agent: PostmanRuntime/7.44.0
Time: 23:20:16
Host: 26.98.105.98:7292
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJhNGE0YWM3OS0yNWFmLTRiOWUtOTFlNy1lN2ExZGZhYzM1NmEiLCJzdWIiOiIxIiwicm9sZSI6ImFkbWluIiwiZXhwIjoxNzQ3Njk3MTAxfQ.W3iHXkN7N2GlpQZmmECdzjg_UB9m413Jnn7bcQrXyRY
Body: {
"UserId":1,
"AppId":1,
"Amout":199.0
}

Failed executing DbCommand (48ms) [Parameters=[@p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?' (Size = 255), @p4='?' (Size = 4000), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
INSERT INTO `Payments` (`Amount`, `AppId`, `CreatedAt`, `PaymentId`, `Status`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT `Id`
FROM `Payments`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
An exception occurred in the database while saving changes for context type 'EzhikLoader.Server.Data.MyDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Table 'ezhik_loader.payments' doesn't exist
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
An unhandled exception has occurred while executing the request.
Application is shutting down...
Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE DATABASE `ezhik_loader`;
Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER DATABASE CHARACTER SET utf8mb4;
Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE `Apps` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` varchar(32) CHARACTER SET utf8mb4 NOT NULL,
    `Description` TEXT CHARACTER SET utf8mb4 NOT NULL,
    `Price` DECIMAL(6,2) NOT NULL,
    `IsActive` tinyint(1) NOT NULL,
    `CreatedAt` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP(),
    `LastUpdatedAt` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP(),
    `FileName` varchar(32) CHARACTER SET utf8mb4 NOT NULL,
    `IconName` varchar(32) CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_Apps` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE `Roles` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` varchar(32) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK_Roles` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
Executed DbCommand (53ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE `Users` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Login` varchar(20) CHARACTER SET utf8mb4 NOT NULL,
    `Password` varchar(32) CHARACTER SET utf8mb4 NOT NULL,
    `Email` varchar(255) CHARACTER SET utf8mb4 NULL,
    `RoleId` int NOT NULL,
    `IsActive` tinyint(1) NOT NULL,
    `RegistrationDate` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP(),
    `LastLoginDate` TIMESTAMP NULL,
    CONSTRAINT `PK_Users` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Users_Roles_RoleId` FOREIGN KEY (`RoleId`) REFERENCES `Roles` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
Executed DbCommand (43ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE `Payments` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `PaymentId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `Status` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Amount` decimal(65,30) NOT NULL,
    `CreatedAt` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP(),
    `UserId` int NOT NULL,
    `AppId` int NOT NULL,
    CONSTRAINT `PK_Payments` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Payments_Apps_AppId` FOREIGN KEY (`AppId`) REFERENCES `Apps` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_Payments_Users_UserId` FOREIGN KEY (`UserId`) REFERENCES `Users` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
Executed DbCommand (55ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE `Subscriptions` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `StartDate` TIMESTAMP NOT NULL,
    `EndDate` TIMESTAMP NOT NULL,
    `LastDownloadedAt` TIMESTAMP NULL,
    `UserId` int NOT NULL,
    `AppId` int NOT NULL,
    `PaymentId` int NOT NULL,
    CONSTRAINT `PK_Subscriptions` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Subscriptions_Apps_AppId` FOREIGN KEY (`AppId`) REFERENCES `Apps` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_Subscriptions_Payments_PaymentId` FOREIGN KEY (`PaymentId`) REFERENCES `Payments` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_Subscriptions_Users_UserId` FOREIGN KEY (`UserId`) REFERENCES `Users` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO `Apps` (`Id`, `Description`, `FileName`, `IconName`, `IsActive`, `Name`, `Price`)
VALUES (1, 'Description for testApp1', 'testApp1', NULL, TRUE, 'testApp1', 199.0);
Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO `Roles` (`Id`, `Name`)
VALUES (1, 'admin'),
(2, 'user');
Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO `Users` (`Id`, `Email`, `IsActive`, `LastLoginDate`, `Login`, `Password`, `RoleId`)
VALUES (1, NULL, TRUE, NULL, 'test', 'test', 1);
Executed DbCommand (42ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX `IX_Apps_FileName` ON `Apps` (`FileName`);
Executed DbCommand (31ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX `IX_Apps_IconName` ON `Apps` (`IconName`);
Executed DbCommand (34ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX `IX_Apps_Name` ON `Apps` (`Name`);
Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX `IX_Payments_AppId` ON `Payments` (`AppId`);
Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX `IX_Payments_PaymentId` ON `Payments` (`PaymentId`);
Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX `IX_Payments_UserId` ON `Payments` (`UserId`);
Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX `IX_Roles_Name` ON `Roles` (`Name`);
Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX `IX_Subscriptions_AppId` ON `Subscriptions` (`AppId`);
Executed DbCommand (15ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX `IX_Subscriptions_PaymentId` ON `Subscriptions` (`PaymentId`);
Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX `IX_Subscriptions_UserId` ON `Subscriptions` (`UserId`);
Executed DbCommand (39ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX `IX_Users_Email` ON `Users` (`Email`);
Executed DbCommand (34ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX `IX_Users_Login` ON `Users` (`Login`);
Executed DbCommand (119ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX `IX_Users_RoleId` ON `Users` (`RoleId`);
Now listening on: https://26.98.105.98:7292
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: C:\MyFiles\Programming\C#\Ezhik Loader\EzhikLoader.Server
Method: POST
Path: /api/payments/start
User-Agent: PostmanRuntime/7.44.0
Time: 23:20:56
Host: 26.98.105.98:7292
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJhNGE0YWM3OS0yNWFmLTRiOWUtOTFlNy1lN2ExZGZhYzM1NmEiLCJzdWIiOiIxIiwicm9sZSI6ImFkbWluIiwiZXhwIjoxNzQ3Njk3MTAxfQ.W3iHXkN7N2GlpQZmmECdzjg_UB9m413Jnn7bcQrXyRY
Body: {
"UserId":1,
"AppId":1,
"Amout":199.0
}

Executed DbCommand (28ms) [Parameters=[@p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?' (Size = 255), @p4='?' (Size = 4000), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
INSERT INTO `Payments` (`Amount`, `AppId`, `CreatedAt`, `PaymentId`, `Status`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT `Id`
FROM `Payments`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
StatusCode: 200

Method: GET
Path: /api/payments/status/25bce127-6f82-4a0c-afb3-56e2d794e189
User-Agent: PostmanRuntime/7.44.0
Time: 23:22:07
Host: 26.98.105.98:7292
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJhNGE0YWM3OS0yNWFmLTRiOWUtOTFlNy1lN2ExZGZhYzM1NmEiLCJzdWIiOiIxIiwicm9sZSI6ImFkbWluIiwiZXhwIjoxNzQ3Njk3MTAxfQ.W3iHXkN7N2GlpQZmmECdzjg_UB9m413Jnn7bcQrXyRY
Body: 

Executed DbCommand (1ms) [Parameters=[@__paymentId_0='?' (Size = 255)], CommandType='Text', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Amount`, `p`.`AppId`, `p`.`CreatedAt`, `p`.`PaymentId`, `p`.`Status`, `p`.`UserId`
FROM `Payments` AS `p`
WHERE `p`.`PaymentId` = @__paymentId_0
LIMIT 1
StatusCode: 200

Method: POST
Path: /api/payments/webhook
User-Agent: PostmanRuntime/7.44.0
Time: 23:23:29
Host: 26.98.105.98:7292
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJhNGE0YWM3OS0yNWFmLTRiOWUtOTFlNy1lN2ExZGZhYzM1NmEiLCJzdWIiOiIxIiwicm9sZSI6ImFkbWluIiwiZXhwIjoxNzQ3Njk3MTAxfQ.W3iHXkN7N2GlpQZmmECdzjg_UB9m413Jnn7bcQrXyRY
Body: {
"PaymentId":"25bce127-6f82-4a0c-afb3-56e2d794e189",
"Status":"success",
"Amount":199.0
}

Executed DbCommand (1ms) [Parameters=[@__paymentId_0='?' (Size = 255)], CommandType='Text', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Amount`, `p`.`AppId`, `p`.`CreatedAt`, `p`.`PaymentId`, `p`.`Status`, `p`.`UserId`
FROM `Payments` AS `p`
WHERE `p`.`PaymentId` = @__paymentId_0
LIMIT 1
Executed DbCommand (5ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Payments` SET `Status` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
Executed DbCommand (1ms) [Parameters=[@__paymentId_0='?' (Size = 255)], CommandType='Text', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Amount`, `p`.`AppId`, `p`.`CreatedAt`, `p`.`PaymentId`, `p`.`Status`, `p`.`UserId`, `u`.`Id`, `u`.`Email`, `u`.`IsActive`, `u`.`LastLoginDate`, `u`.`Login`, `u`.`Password`, `u`.`RegistrationDate`, `u`.`RoleId`, `a`.`Id`, `a`.`CreatedAt`, `a`.`Description`, `a`.`FileName`, `a`.`IconName`, `a`.`IsActive`, `a`.`LastUpdatedAt`, `a`.`Name`, `a`.`Price`
FROM `Payments` AS `p`
INNER JOIN `Users` AS `u` ON `p`.`UserId` = `u`.`Id`
INNER JOIN `Apps` AS `a` ON `p`.`AppId` = `a`.`Id`
WHERE `p`.`PaymentId` = @__paymentId_0
LIMIT 1
Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
INSERT INTO `Subscriptions` (`AppId`, `EndDate`, `LastDownloadedAt`, `PaymentId`, `StartDate`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT `Id`
FROM `Subscriptions`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
StatusCode: 200

Method: GET
Path: /api/payments/status/25bce127-6f82-4a0c-afb3-56e2d794e189
User-Agent: PostmanRuntime/7.44.0
Time: 23:23:34
Host: 26.98.105.98:7292
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJhNGE0YWM3OS0yNWFmLTRiOWUtOTFlNy1lN2ExZGZhYzM1NmEiLCJzdWIiOiIxIiwicm9sZSI6ImFkbWluIiwiZXhwIjoxNzQ3Njk3MTAxfQ.W3iHXkN7N2GlpQZmmECdzjg_UB9m413Jnn7bcQrXyRY
Body: 

Executed DbCommand (1ms) [Parameters=[@__paymentId_0='?' (Size = 255)], CommandType='Text', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Amount`, `p`.`AppId`, `p`.`CreatedAt`, `p`.`PaymentId`, `p`.`Status`, `p`.`UserId`
FROM `Payments` AS `p`
WHERE `p`.`PaymentId` = @__paymentId_0
LIMIT 1
StatusCode: 200

Application is shutting down...
Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE DATABASE `ezhik_loader`;
Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER DATABASE CHARACTER SET utf8mb4;
Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE `Apps` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` varchar(32) CHARACTER SET utf8mb4 NOT NULL,
    `Description` TEXT CHARACTER SET utf8mb4 NOT NULL,
    `Price` DECIMAL(6,2) NOT NULL,
    `IsActive` tinyint(1) NOT NULL,
    `CreatedAt` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP(),
    `LastUpdatedAt` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP(),
    `FileName` varchar(32) CHARACTER SET utf8mb4 NOT NULL,
    `IconName` varchar(32) CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_Apps` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE `Roles` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` varchar(32) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK_Roles` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
Executed DbCommand (44ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE `Users` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Login` varchar(20) CHARACTER SET utf8mb4 NOT NULL,
    `Password` varchar(32) CHARACTER SET utf8mb4 NOT NULL,
    `Email` varchar(255) CHARACTER SET utf8mb4 NULL,
    `RoleId` int NOT NULL,
    `IsActive` tinyint(1) NOT NULL,
    `RegistrationDate` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP(),
    `LastLoginDate` TIMESTAMP NULL,
    CONSTRAINT `PK_Users` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Users_Roles_RoleId` FOREIGN KEY (`RoleId`) REFERENCES `Roles` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
Executed DbCommand (52ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE `Payments` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `PaymentId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `Status` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Amount` decimal(65,30) NOT NULL,
    `CreatedAt` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP(),
    `UserId` int NOT NULL,
    `AppId` int NOT NULL,
    CONSTRAINT `PK_Payments` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Payments_Apps_AppId` FOREIGN KEY (`AppId`) REFERENCES `Apps` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_Payments_Users_UserId` FOREIGN KEY (`UserId`) REFERENCES `Users` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
Executed DbCommand (47ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE `Subscriptions` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `StartDate` TIMESTAMP NOT NULL,
    `EndDate` TIMESTAMP NOT NULL,
    `LastDownloadedAt` TIMESTAMP NULL,
    `UserId` int NOT NULL,
    `AppId` int NOT NULL,
    `PaymentId` int NOT NULL,
    CONSTRAINT `PK_Subscriptions` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Subscriptions_Apps_AppId` FOREIGN KEY (`AppId`) REFERENCES `Apps` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_Subscriptions_Payments_PaymentId` FOREIGN KEY (`PaymentId`) REFERENCES `Payments` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_Subscriptions_Users_UserId` FOREIGN KEY (`UserId`) REFERENCES `Users` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO `Apps` (`Id`, `Description`, `FileName`, `IconName`, `IsActive`, `Name`, `Price`)
VALUES (1, 'Description for testApp1', 'testApp1', NULL, TRUE, 'testApp1', 199.0);
Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO `Roles` (`Id`, `Name`)
VALUES (1, 'admin'),
(2, 'user');
Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO `Users` (`Id`, `Email`, `IsActive`, `LastLoginDate`, `Login`, `Password`, `RoleId`)
VALUES (1, NULL, TRUE, NULL, 'test', 'test', 1);
Executed DbCommand (44ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX `IX_Apps_FileName` ON `Apps` (`FileName`);
Executed DbCommand (201ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX `IX_Apps_IconName` ON `Apps` (`IconName`);
Executed DbCommand (429ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX `IX_Apps_Name` ON `Apps` (`Name`);
Executed DbCommand (34ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX `IX_Payments_AppId` ON `Payments` (`AppId`);
Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX `IX_Payments_PaymentId` ON `Payments` (`PaymentId`);
Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX `IX_Payments_UserId` ON `Payments` (`UserId`);
Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX `IX_Roles_Name` ON `Roles` (`Name`);
Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX `IX_Subscriptions_AppId` ON `Subscriptions` (`AppId`);
Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX `IX_Subscriptions_PaymentId` ON `Subscriptions` (`PaymentId`);
Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX `IX_Subscriptions_UserId` ON `Subscriptions` (`UserId`);
Executed DbCommand (32ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX `IX_Users_Email` ON `Users` (`Email`);
Executed DbCommand (34ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX `IX_Users_Login` ON `Users` (`Login`);
Executed DbCommand (30ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX `IX_Users_RoleId` ON `Users` (`RoleId`);
Now listening on: https://26.98.105.98:7292
Application started. Press Ctrl+C to shut down.
Hosting environment: Development
Content root path: C:\MyFiles\Programming\C#\Ezhik Loader\EzhikLoader.Server
Method: POST
Path: /api/payments/start
User-Agent: PostmanRuntime/7.44.0
Time: 23:25:38
Host: 26.98.105.98:7292
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJhNGE0YWM3OS0yNWFmLTRiOWUtOTFlNy1lN2ExZGZhYzM1NmEiLCJzdWIiOiIxIiwicm9sZSI6ImFkbWluIiwiZXhwIjoxNzQ3Njk3MTAxfQ.W3iHXkN7N2GlpQZmmECdzjg_UB9m413Jnn7bcQrXyRY
Body: {
"UserId":1,
"AppId":1,
"Amount":199.0
}

Executed DbCommand (35ms) [Parameters=[@p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?' (Size = 255), @p4='?' (Size = 4000), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
INSERT INTO `Payments` (`Amount`, `AppId`, `CreatedAt`, `PaymentId`, `Status`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT `Id`
FROM `Payments`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
StatusCode: 200

Method: GET
Path: /api/payments/status/ca256a65-608a-4b62-b195-0e3cd38edec1
User-Agent: PostmanRuntime/7.44.0
Time: 23:25:53
Host: 26.98.105.98:7292
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJhNGE0YWM3OS0yNWFmLTRiOWUtOTFlNy1lN2ExZGZhYzM1NmEiLCJzdWIiOiIxIiwicm9sZSI6ImFkbWluIiwiZXhwIjoxNzQ3Njk3MTAxfQ.W3iHXkN7N2GlpQZmmECdzjg_UB9m413Jnn7bcQrXyRY
Body: 

Executed DbCommand (1ms) [Parameters=[@__paymentId_0='?' (Size = 255)], CommandType='Text', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Amount`, `p`.`AppId`, `p`.`CreatedAt`, `p`.`PaymentId`, `p`.`Status`, `p`.`UserId`
FROM `Payments` AS `p`
WHERE `p`.`PaymentId` = @__paymentId_0
LIMIT 1
StatusCode: 200

Method: POST
Path: /api/payments/webhook
User-Agent: PostmanRuntime/7.44.0
Time: 23:26:05
Host: 26.98.105.98:7292
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJhNGE0YWM3OS0yNWFmLTRiOWUtOTFlNy1lN2ExZGZhYzM1NmEiLCJzdWIiOiIxIiwicm9sZSI6ImFkbWluIiwiZXhwIjoxNzQ3Njk3MTAxfQ.W3iHXkN7N2GlpQZmmECdzjg_UB9m413Jnn7bcQrXyRY
Body: {
"PaymentId":"ca256a65-608a-4b62-b195-0e3cd38edec1",
"Status":"success",
"Amount":199.0
}

Executed DbCommand (1ms) [Parameters=[@__paymentId_0='?' (Size = 255)], CommandType='Text', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Amount`, `p`.`AppId`, `p`.`CreatedAt`, `p`.`PaymentId`, `p`.`Status`, `p`.`UserId`
FROM `Payments` AS `p`
WHERE `p`.`PaymentId` = @__paymentId_0
LIMIT 1
Executed DbCommand (4ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Payments` SET `Status` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
Executed DbCommand (1ms) [Parameters=[@__paymentId_0='?' (Size = 255)], CommandType='Text', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Amount`, `p`.`AppId`, `p`.`CreatedAt`, `p`.`PaymentId`, `p`.`Status`, `p`.`UserId`, `u`.`Id`, `u`.`Email`, `u`.`IsActive`, `u`.`LastLoginDate`, `u`.`Login`, `u`.`Password`, `u`.`RegistrationDate`, `u`.`RoleId`, `a`.`Id`, `a`.`CreatedAt`, `a`.`Description`, `a`.`FileName`, `a`.`IconName`, `a`.`IsActive`, `a`.`LastUpdatedAt`, `a`.`Name`, `a`.`Price`
FROM `Payments` AS `p`
INNER JOIN `Users` AS `u` ON `p`.`UserId` = `u`.`Id`
INNER JOIN `Apps` AS `a` ON `p`.`AppId` = `a`.`Id`
WHERE `p`.`PaymentId` = @__paymentId_0
LIMIT 1
Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
INSERT INTO `Subscriptions` (`AppId`, `EndDate`, `LastDownloadedAt`, `PaymentId`, `StartDate`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT `Id`
FROM `Subscriptions`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
StatusCode: 200

Application is shutting down...
Executed DbCommand (14ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='ezhik_loader' AND TABLE_NAME='__EFMigrationsHistory';
